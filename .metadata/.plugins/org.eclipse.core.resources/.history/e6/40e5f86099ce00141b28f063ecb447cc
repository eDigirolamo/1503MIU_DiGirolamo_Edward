Titanium.UI.setBackgroundColor('#000');

var deviceData = require("JSON");
var phones = deviceData.deviceData.phones;

var pWidth = Ti.Platform.displayCaps.platformWidth;
var pHeight = Ti.Platform.displayCaps.platformHeight;
var margin = 10;

var deviceCount = phones.length;
var rowCount = 3;

var availableWidth = pWidth - (margin * 4);
var size = (availableWidth / rowCount);

// windows
var mainWin = Ti.UI.createWindow({
		title: "Info App",
});


var galleryContainer = Ti.UI.createScrollView({
	backgroundColor: "#fff",
	layout: "horizontal",

	width: pWidth,
	contentWidth: pWidth,
});

var navWin = Ti.UI.iOS.createNavigationWindow({
	window: mainWin
});





for(n in phones){
			var view = Ti.UI.createImageView({
				backgroundColor: "#fff",
				image: "images/" + phones[n].image,
				name: phones[n].name,
				manufacturer: phones[n].manufacturer,
				cpu: phones[n].cpu,
				ram: phones[n].ram,
				storage: phones[n].storage, 
				screenSize: phones[n].screenSize,
				camera:  phones[n].camera, 
				codename: phones[n].codename, 
				osVersion: phones[n].osVersion, 
				newFeature: phones[n].newFeature,
				top: margin,
				left: margin,
				width: size,
				height: size,
				borderRadius: 3	
			});
			
			// must add to scrollview in order for imageview to not be placed over itself
			
			galleryContainer.add(view);
}



var infoPane = function(name, manufacturer, cpu, ram, storage, screenSize,camera, codename, osVersion, newFeature, deviceImage ){

	var detailWin = Ti.UI.createWindow({
		title: name
		
	});
	
	var phoneImage = Ti.UI.createImageView({
		backgroundColor: "#fff",
		image: "images/" + deviceImage,
		top: 15,
		height: 100
	});

	var manLable =Ti.UI.createLabel({
		text:"Manufacturer: " + manufacturer,
		top: phoneImage.top + phoneImage.height
	});
	var cpuLabel = Ti.UI.createLabel({
		text:"CPU: " + cpu,
		top: manLable.top + 15
	});
	
	var ramLabel = Ti.UI.createLabel({
		text:"Ram: " + ram,
		top: cpuLabel.top + 15
	});
	
	var storageLabel = Ti.UI.createLabel({
		text:"Storage: " + storage,
		top: ramLabel.top + 15
	});
	
	var screenSizeLabel = Ti.UI.createLabel({
		text:"Screen Size: " + screenSize,
		top: storageLabel.top + 15
	});
	
	var camLabel= Ti.UI.createLabel({
		text:"Camera: " + camera,
		top: screenSizeLabel.top + 15
	});
	
	var codenameLabel =Ti.UI.createLabel({
		text:"Codename: " + codename,
		top: camLabel.top + 15
	});
	
	var osVeriosnLabel = Ti.UI.createLabel({
		text:"OS Version: " + osVersion,
		top: codenameLabel.top + 15
	});
	
	var newFeatureLabel = Ti.UI.createLabel({
		text:"New Feature: " + newFeature,
		top: osVeriosnLabel.top + 15
	});
	
	
	detailWin.add(phoneImage, manLable, cpuLabel,ramLabel,storageLabel,screenSizeLabel,camLabel,codenameLabel,osVeriosnLabel,newFeatureLabel);
	navWin.openWindow(detailWin);

};


			
mainWin.add(galleryContainer);
navWin.open();

galleryContainer.addEventListener("click", function(event){
	var name = event.source.name;
	var manufacturer = event.source.manufacturer;
	var cpu = event.source.cpu;
	var ram = event.source.ram;
	var storage = event.source.storage;
	var screenSize = event.source.screenSize;
	var camera = event.source.camera;
	var codename = event.source.codename;
	var osVersion = event.source.osVersion;
	var newFeature = event.source.newFeature;
	var deviceImage = event.source.image;
	

	console.log(deviceImage );
	
	infoPane(name,manufacturer,cpu,ram,storage,screenSize,camera,codename,osVersion,newFeature, deviceImage);	
});
